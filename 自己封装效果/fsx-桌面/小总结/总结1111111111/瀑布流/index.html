<!DOCTYPE html>
<!-- saved from url=(0089)https://evenyao.github.io/waterfall-demo/Demo/%E7%80%91%E5%B8%83%E6%B5%81%20-%20demo.html -->
<html lang="zh-CN"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <style>
    .waterfall {
   
    }
    .waterfall .img {
      position: absolute;
      width: 200px;
	    margin: 10px;
      /* 布局transition效果 */
      transition: all .4s;
      border:1px solid #333;
      padding-bottom: 100px;
      background: #4caf50;
    }
    .waterfall .img img{
      width: 100%;
      display: block;
      height: auto;
    }
  </style>
  <title>瀑布流</title>
</head>
<body>
  <div class="waterfall">
    <div class="img"><img src="./imgs/img1.jpg" alt=""></div>
    <div class="img"><img src="./imgs/img2.jpg" alt=""></div>
    <div class="img"><img src="./imgs/img3.jpg" alt=""></div>
    <div class="img"><img src="./imgs/img4.jpg" alt=""></div>
    <div class="img"><img src="./imgs/img5.png" alt=""></div>
    <div class="img"><img src="./imgs/img6.jpg" alt=""></div>
    <div class="img"><img src="./imgs/img7.jpg" alt=""></div>
    <div class="img"><img src="./imgs/img8.JPEG" alt=""></div>
    <div class="img"><img src="./imgs/img9.jpg" alt=""></div>
    <div class="img"><img src="./imgs/img10.jpg" alt=""></div>
    <div class="img"><img src="./imgs/img11.jpg" alt=""></div>
    <div class="img"><img src="./imgs/img12.jpg" alt=""></div>
    <div class="img"><img src="./imgs/img13.jpg" alt=""></div>
    <div class="img"><img src="./imgs/img14.png" alt=""></div>
    <div class="img"><img src="./imgs/img15.jpg" alt=""></div>
    <div class="img"><img src="./imgs/img1.jpg" alt=""></div>
    <div class="img"><img src="./imgs/img2.jpg" alt=""></div>
    <div class="img"><img src="./imgs/img3.jpg" alt=""></div>
    <div class="img"><img src="./imgs/img4.jpg" alt=""></div>
    <div class="img"><img src="./imgs/img5.png" alt=""></div>
    <div class="img"><img src="./imgs/img6.jpg" alt=""></div>
    <div class="img"><img src="./imgs/img7.jpg" alt=""></div>
    <div class="img"><img src="./imgs/img8.JPEG" alt=""></div>
    <div class="img"><img src="./imgs/img9.jpg" alt=""></div>
    <div class="img"><img src="./imgs/img10.jpg" alt=""></div>
    <div class="img"><img src="./imgs/img11.jpg" alt=""></div>
    <div class="img"><img src="./imgs/img12.jpg" alt=""></div>
    <div class="img"><img src="./imgs/img13.jpg" alt=""></div>
    <div class="img"><img src="./imgs/img14.png" alt=""></div>
    <div class="img"><img src="./imgs/img15.jpg" alt=""></div>
    <div class="img"><img src="./imgs/img1.jpg" alt=""></div>
    <div class="img"><img src="./imgs/img2.jpg" alt=""></div>
    <div class="img"><img src="./imgs/img3.jpg" alt=""></div>
    <div class="img"><img src="./imgs/img4.jpg" alt=""></div>
    <div class="img"><img src="./imgs/img5.png" alt=""></div>
    <div class="img"><img src="./imgs/img6.jpg" alt=""></div>
    <div class="img"><img src="./imgs/img7.jpg" alt=""></div>
    <div class="img"><img src="./imgs/img8.JPEG" alt=""></div>
    <div class="img"><img src="./imgs/img9.jpg" alt=""></div>
    <div class="img"><img src="./imgs/img10.jpg" alt=""></div>
    <div class="img"><img src="./imgs/img11.jpg" alt=""></div>
    <div class="img"><img src="./imgs/img12.jpg" alt=""></div>
    <div class="img"><img src="./imgs/img13.jpg" alt=""></div>
    <div class="img"><img src="./imgs/img14.png" alt=""></div>
    <div class="img"><img src="./imgs/img15.jpg" alt=""></div>
    <div class="img"><img src="./imgs/img1.jpg" alt=""></div>
    <div class="img"><img src="./imgs/img2.jpg" alt=""></div>
    <div class="img"><img src="./imgs/img3.jpg" alt=""></div>
    <div class="img"><img src="./imgs/img4.jpg" alt=""></div>
    <div class="img"><img src="./imgs/img5.png" alt=""></div>
    <div class="img"><img src="./imgs/img6.jpg" alt=""></div>
    <div class="img"><img src="./imgs/img7.jpg" alt=""></div>
    <div class="img"><img src="./imgs/img8.JPEG" alt=""></div>
    <div class="img"><img src="./imgs/img9.jpg" alt=""></div>
    <div class="img"><img src="./imgs/img10.jpg" alt=""></div>
    <div class="img"><img src="./imgs/img11.jpg" alt=""></div>
    <div class="img"><img src="./imgs/img12.jpg" alt=""></div>
    <div class="img"><img src="./imgs/img13.jpg" alt=""></div>
    <div class="img"><img src="./imgs/img14.png" alt=""></div>
    <div class="img"><img src="./imgs/img15.jpg" alt=""></div>
    <div class="img"><img src="./imgs/img1.jpg" alt=""></div>
    <div class="img"><img src="./imgs/img2.jpg" alt=""></div>
    <div class="img"><img src="./imgs/img3.jpg" alt=""></div>
    <div class="img"><img src="./imgs/img4.jpg" alt=""></div>
    <div class="img"><img src="./imgs/img5.png" alt=""></div>
    <div class="img"><img src="./imgs/img6.jpg" alt=""></div>
    <div class="img"><img src="./imgs/img7.jpg" alt=""></div>
    <div class="img"><img src="./imgs/img8.JPEG" alt=""></div>
    <div class="img"><img src="./imgs/img9.jpg" alt=""></div>
    <div class="img"><img src="./imgs/img10.jpg" alt=""></div>
    <div class="img"><img src="./imgs/img11.jpg" alt=""></div>
    <div class="img"><img src="./imgs/img12.jpg" alt=""></div>
    <div class="img"><img src="./imgs/img13.jpg" alt=""></div>
    <div class="img"><img src="./imgs/img14.png" alt=""></div>
    <div class="img"><img src="./imgs/img15.jpg" alt=""></div>
    <div class="img"><img src="./imgs/img1.jpg" alt=""></div>
    <div class="img"><img src="./imgs/img2.jpg" alt=""></div>
    <div class="img"><img src="./imgs/img3.jpg" alt=""></div>
    <div class="img"><img src="./imgs/img4.jpg" alt=""></div>
    <div class="img"><img src="./imgs/img5.png" alt=""></div>
    <div class="img"><img src="./imgs/img6.jpg" alt=""></div>
    <div class="img"><img src="./imgs/img7.jpg" alt=""></div>
    <div class="img"><img src="./imgs/img8.JPEG" alt=""></div>
    <div class="img"><img src="./imgs/img9.jpg" alt=""></div>
    <div class="img"><img src="./imgs/img10.jpg" alt=""></div>
    <div class="img"><img src="./imgs/img11.jpg" alt=""></div>
    <div class="img"><img src="./imgs/img12.jpg" alt=""></div>
    <div class="img"><img src="./imgs/img13.jpg" alt=""></div>
    <div class="img"><img src="./imgs/img14.png" alt=""></div>
    <div class="img"><img src="./imgs/img15.jpg" alt=""></div>
  </div>


<script src="./jquery.js"></script>
<script>

  var colCount;  //定义列数
  var colHeightArry= [];   //定义列高度数组
  var imgWidth = $('.waterfall .img').outerWidth(true);  //单张图片的宽度

  colCount = parseInt($('.waterfall').width()/imgWidth);  //计算出列数
  for(var i = 0 ; i < colCount; i ++){
    colHeightArry[i] = 0
  }
  //[0,0,0]

  $('.waterfall .img').on('load',function(){
  
    var minValue = colHeightArry[0]; //定义最小的高度
    var minIndex = 0; //定义最小高度的下标
    for(var i = 0 ; i < colCount; i ++){
      if(colHeightArry[i] < minValue){   //如果最小高度组数中的值小于最小值
        minValue = colHeightArry[i];  //那么认为最小高度数组中的值是真正的最小值
        minIndex = i;  //最小下标为当前下标
      }
    }

    $(this).css({
      left: minIndex * imgWidth,
      top: minValue
    });
    colHeightArry[minIndex] += $(this).outerHeight(true)
  });


  //当窗口大小重置之后，重新执行
  $(window).on('resize',function(){
    reset()
  });


  //当窗口加载完毕，执行瀑布流
  $(window).on('load',function(){
    reset()
  });

  //定义reset函数
  function reset(){
	var colHeightArry= [];
    colCount = parseInt($('.waterfall').width()/imgWidth);
    for(var i = 0 ; i < colCount; i ++){
      colHeightArry[i] = 0
    }
    $('.waterfall .img').each(function(){
      var minValue = colHeightArry[0];
      var minIndex = 0;
      for(var i = 0 ; i < colCount; i ++){
        if(colHeightArry[i] < minValue){
          minValue = colHeightArry[i];
          minIndex = i;
        }
      }

      $(this).css({
        left: minIndex * imgWidth,
        top: minValue
      });
      colHeightArry[minIndex] += $(this).outerHeight(true);
    })
  }


</script>
</body></html>